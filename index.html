<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>墨籽拾光工作室 - 创意投稿</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- 添加CryptoJS库用于密码加密 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4A6FA5',
            secondary: '#F2B880',
            accent: '#7AA874',
            light: '#F8F9FA',
            dark: '#2C3E50'
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .transition-custom {
        transition: all 0.3s ease;
      }
      .bg-pattern {
        background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      }
    }
  </style>
</head>
<body class="font-sans bg-pattern text-gray-800 min-h-screen flex flex-col">
  <!-- 导航栏 -->
  <header id="navbar" class="bg-white/90 backdrop-blur-sm shadow-sm sticky top-0 z-50 transition-all duration-300">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center py-4">
        <div class="flex items-center">
          <a href="#" class="flex items-center space-x-2">
            <i class="fa fa-paint-brush text-primary text-2xl"></i>
            <span class="text-xl font-bold text-dark">墨籽拾光工作室</span>
          </a>
        </div>
        
        <!-- 桌面导航 -->
        <nav class="hidden md:flex space-x-6">
          <a href="#" class="text-gray-700 hover:text-primary transition-custom font-medium">首页</a>
          <button id="aboutUsBtn" class="text-gray-700 hover:text-primary transition-custom font-medium flex items-center">
            关于我们 <i class="fa fa-chevron-down ml-1 text-xs"></i>
          </button>
          <a href="#contact" class="text-gray-700 hover:text-primary transition-custom font-medium">联系我们</a>
          <a href="admin-login.html" class="bg-primary hover:bg-primary/90 text-white px-5 py-2 rounded-full transition-custom font-medium flex items-center">
            <i class="fa fa-lock mr-2"></i>管理员入口
          </a>
        </nav>
        
        <!-- 移动端菜单按钮 -->
        <button id="menuBtn" class="md:hidden text-gray-700 focus:outline-none">
          <i class="fa fa-bars text-2xl"></i>
        </button>
      </div>
    </div>
    
    <!-- 移动端导航菜单 -->
    <div id="mobileMenu" class="md:hidden hidden bg-white border-t">
      <div class="container mx-auto px-4 py-3 space-y-3">
        <a href="#" class="block text-gray-700 hover:text-primary transition-custom py-2">首页</a>
        <button id="mobileAboutUsBtn" class="w-full text-left text-gray-700 hover:text-primary transition-custom py-2">
          关于我们
        </button>
        <a href="#contact" class="block text-gray-700 hover:text-primary transition-custom py-2">联系我们</a>
        <a href="admin-login.html" class="block bg-primary hover:bg-primary/90 text-white px-5 py-2 rounded-full transition-custom text-center font-medium">
          <i class="fa fa-lock mr-2"></i>管理员入口
        </a>
      </div>
    </div>
  </header>

  <!-- 关于我们模态框 -->
  <div id="aboutUsModal" class="fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto transform transition-all">
      <div class="p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-2xl font-bold text-dark">墨籽拾光工作室</h3>
          <button id="closeAboutModal" class="text-gray-500 hover:text-gray-700">
            <i class="fa fa-times text-xl"></i>
          </button>
        </div>
        <div class="border-t pt-4">
          <p class="text-gray-600 leading-relaxed mb-4">
            墨籽拾光工作室专注于收集和展示青少年的创意作品，为广大初高中学生提供一个展示自我、交流思想的平台。
          </p>
          <p class="text-gray-600 leading-relaxed">
            我们相信每一个创意都值得被看见，每一段青春都值得被记录。通过这个投稿平台，让更多人感受到年轻一代的创造力与想象力。
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- 英雄区域 -->
  <section class="pt-20 pb-16 md:pt-28 md:pb-24 relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-blue-50 to-green-50 -z-10"></div>
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col md:flex-row items-center">
        <div class="md:w-1/2 md:pr-12 mb-10 md:mb-0">
          <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-dark leading-tight mb-6">
            分享你的创意<br><span class="text-primary">与墨籽共拾时光</span>
          </h1>
          <p class="text-gray-600 text-lg mb-8 max-w-lg">
            无论是文字、绘画还是创意设计，我们都期待看到你的作品。让我们一起记录青春，分享美好。
          </p>
          <a href="#submission" class="bg-primary hover:bg-primary/90 text-white px-8 py-3 rounded-full transition-custom font-medium inline-flex items-center shadow-lg shadow-primary/20">
            立即投稿 <i class="fa fa-arrow-right ml-2"></i>
          </a>
        </div>
        <div class="md:w-1/2 relative">
          <div class="relative z-10 rounded-2xl overflow-hidden shadow-2xl transform transition-transform hover:scale-[1.02] duration-500">
            <img src="https://p3-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/8b38981e4d9a4f198813afebe8ef6b8b.png~tplv-a9rns2rl98-24:720:720.png?rcl=20251001183157EF9E60F3BBB15B00C562&rk3s=8e244e95&rrcfp=8a172a1a&x-expires=1759919518&x-signature=tnWXjt3Smw0UEVO7WIPCwdep1wQ%3D" 
                 alt="墨籽拾光创意分享" class="w-full h-auto">
          </div>
          <div class="absolute -bottom-6 -left-6 w-32 h-32 bg-accent/20 rounded-full filter blur-2xl"></div>
          <div class="absolute -top-6 -right-6 w-32 h-32 bg-primary/20 rounded-full filter blur-2xl"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- 投稿区域 -->
  <section id="submission" class="py-16 md:py-24 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-dark mb-4">创意投稿</h2>
        <p class="text-gray-600 max-w-2xl mx-auto">分享你的创意作品，让更多人看到你的才华</p>
      </div>
      
      <div class="max-w-4xl mx-auto bg-light rounded-2xl shadow-lg overflow-hidden">
        <div class="p-6 md:p-8">
          <form id="submissionForm" class="space-y-6">
            <!-- 匿名/实名选择 -->
            <div class="bg-white p-4 rounded-xl shadow-sm">
              <h3 class="text-lg font-semibold mb-4 text-dark">投稿方式</h3>
              <div class="flex flex-wrap gap-4">
                <label class="inline-flex items-center">
                  <input type="radio" name="submissionType" value="anonymous" class="form-radio text-primary focus:ring-primary h-5 w-5" checked>
                  <span class="ml-2 text-gray-700">匿名投稿</span>
                </label>
                <label class="inline-flex items-center">
                  <input type="radio" name="submissionType" value="realname" class="form-radio text-primary focus:ring-primary h-5 w-5">
                  <span class="ml-2 text-gray-700">实名投稿</span>
                </label>
              </div>
            </div>
            
            <!-- 作品信息 -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="workTitle" class="block text-gray-700 font-medium mb-2">作品主题 <span class="text-red-500">*</span></label>
                <input type="text" id="workTitle" name="workTitle" required
                       class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-custom"
                       placeholder="请输入作品主题">
              </div>
              
              <div id="authorField" class="hidden">
                <label for="authorName" class="block text-gray-700 font-medium mb-2">作品作者 <span class="text-red-500">*</span></label>
                <input type="text" id="authorName" name="authorName"
                       class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-custom"
                       placeholder="请输入您的姓名">
              </div>
            </div>
            
            <!-- 学校和学段信息 -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="school" class="block text-gray-700 font-medium mb-2">所属学校 <span class="text-red-500">*</span></label>
                <input type="text" id="school" name="school" required
                       class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-custom"
                       placeholder="请输入您的学校名称">
              </div>
              
              <div>
                <label for="grade" class="block text-gray-700 font-medium mb-2">学段 <span class="text-red-500">*</span></label>
                <select id="grade" name="grade" required
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-custom appearance-none bg-white"
                        style="background-image: url('data:image/svg+xml;charset=US-ASCII,<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M7 10l5 5 5-5z\" fill=\"%23333\"/></svg>'); background-repeat: no-repeat; background-position: right 10px center;">
                  <option value="">请选择学段</option>
                  <option value="junior">初中生</option>
                  <option value="senior">高中生</option>
                </select>
              </div>
            </div>
            
            <!-- 作品内容 -->
            <div>
              <label for="workContent" class="block text-gray-700 font-medium mb-2">作品内容 <span class="text-red-500">*</span></label>
              <textarea id="workContent" name="workContent" rows="6" required
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-custom resize-none"
                        placeholder="请描述您的作品创意或内容..."></textarea>
            </div>
            
            <!-- 文件上传 -->
            <div>
              <label class="block text-gray-700 font-medium mb-3">作品附件 (可选)</label>
              <div id="dropArea" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary transition-custom bg-white/50">
                <i class="fa fa-cloud-upload text-4xl text-gray-400 mb-3"></i>
                <p class="text-gray-600 mb-2">拖放文件到此处，或点击上传</p>
                <p class="text-gray-400 text-sm">支持 PDF、图片等格式 (最大 10MB)</p>
                <input type="file" id="fileUpload" name="fileUpload" class="hidden" multiple accept=".pdf,.jpg,.jpeg,.png,.gif">
                <button type="button" id="browseBtn" class="mt-4 inline-block bg-primary/10 hover:bg-primary/20 text-primary px-5 py-2 rounded-lg transition-custom font-medium">
                  选择文件
                </button>
              </div>
              <div id="fileList" class="mt-3 space-y-2 hidden"></div>
            </div>
            
            <!-- 提交按钮 -->
            <div class="pt-4">
              <button type="submit" class="w-full bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-lg transition-custom font-medium shadow-lg shadow-primary/20 flex items-center justify-center">
                <i class="fa fa-paper-plane mr-2"></i> 提交投稿
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- 投稿须知 -->
  <section class="py-16 md:py-24 bg-gray-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-dark mb-4">投稿须知</h2>
        <p class="text-gray-600 max-w-2xl mx-auto">请在投稿前阅读以下须知，确保您的作品符合我们的要求</p>
      </div>
      
      <div class="max-w-3xl mx-auto bg-white rounded-2xl shadow-md p-8">
        <ul class="space-y-4">
          <li class="flex items-start">
            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-primary/10 flex items-center justify-center mt-0.5">
              <i class="fa fa-check text-primary text-sm"></i>
            </div>
            <p class="ml-4 text-gray-700">投稿作品必须为原创，不得抄袭、剽窃他人作品，否则将取消投稿资格。</p>
          </li>
          <li class="flex items-start">
            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-primary/10 flex items-center justify-center mt-0.5">
              <i class="fa fa-check text-primary text-sm"></i>
            </div>
            <p class="ml-4 text-gray-700">作品内容需积极健康，不得包含色情、暴力、违法等不良信息。</p>
          </li>
          <li class="flex items-start">
            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-primary/10 flex items-center justify-center mt-0.5">
              <i class="fa fa-check text-primary text-sm"></i>
            </div>
            <p class="ml-4 text-gray-700">投稿即表示同意墨籽拾光工作室拥有作品的展示权和宣传权，作者拥有署名权。</p>
          </li>
          <li class="flex items-start">
            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-primary/10 flex items-center justify-center mt-0.5">
              <i class="fa fa-check text-primary text-sm"></i>
            </div>
            <p class="ml-4 text-gray-700">我们将在收到投稿后7个工作日内进行审核，通过审核的作品将在平台展示。</p>
          </li>
          <li class="flex items-start">
            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-primary/10 flex items-center justify-center mt-0.5">
              <i class="fa fa-check text-primary text-sm"></i>
            </div>
            <p class="ml-4 text-gray-700">如有任何疑问，请通过联系我们部分的方式与我们取得联系。</p>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- 联系我们 -->
  <section id="contact" class="py-16 md:py-24 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-dark mb-4">联系我们</h2>
        <p class="text-gray-600 max-w-2xl mx-auto">如有任何问题或建议，欢迎与我们联系</p>
      </div>
      
      <div class="max-w-4xl mx-auto">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div class="bg-light rounded-2xl p-8 shadow-md">
            <h3 class="text-xl font-bold text-dark mb-6">联系方式</h3>
            <div class="space-y-6">
              <div class="flex items-start">
                <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mr-4 mt-1 flex-shrink-0">
                  <i class="fa fa-qq text-primary text-xl"></i>
                </div>
                <div>
                  <h4 class="font-bold text-dark mb-1">QQ群</h4>
                  <p class="text-gray-600">联系群: 954034640</p>
                  <p class="text-gray-600">反馈群: 1063451647</p>
                </div>
              </div>
              
              <div class="flex items-start">
                <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mr-4 mt-1 flex-shrink-0">
                  <i class="fa fa-envelope text-primary text-xl"></i>
                </div>
                <div>
                  <h4 class="font-bold text-dark mb-1">电子邮箱</h4>
                  <p class="text-gray-600">contact@mozishiguang.com</p>
                </div>
              </div>
              
              <div class="flex items-start">
                <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mr-4 mt-1 flex-shrink-0">
                  <i class="fa fa-clock-o text-primary text-xl"></i>
                </div>
                <div>
                  <h4 class="font-bold text-dark mb-1">工作时间</h4>
                  <p class="text-gray-600">周一至周五: 9:00 - 18:00</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="bg-light rounded-2xl p-8 shadow-md">
            <h3 class="text-xl font-bold text-dark mb-6">快速链接</h3>
            <ul class="space-y-4">
              <li>
                <a href="#" class="flex items-center text-gray-700 hover:text-primary transition-custom">
                  <i class="fa fa-home w-6 text-gray-400"></i>
                  首页
                </a>
              </li>
              <li>
                <button class="flex items-center text-gray-700 hover:text-primary transition-custom w-full text-left" id="footerAboutUsBtn">
                  <i class="fa fa-info-circle w-6 text-gray-400"></i>
                  关于我们
                </button>
              </li>
              <li>
                <a href="#submission" class="flex items-center text-gray-700 hover:text-primary transition-custom">
                  <i class="fa fa-pencil w-6 text-gray-400"></i>
                  我要投稿
                </a>
              </li>
              <li>
                <a href="#contact" class="flex items-center text-gray-700 hover:text-primary transition-custom">
                  <i class="fa fa-phone w-6 text-gray-400"></i>
                  联系我们
                </a>
              </li>
              <li>
                <a href="admin-login.html" class="flex items-center text-gray-700 hover:text-primary transition-custom">
                  <i class="fa fa-lock w-6 text-gray-400"></i>
                  管理员入口
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 底部 -->
  <footer class="bg-dark text-white py-10">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="flex items-center space-x-2 mb-6 md:mb-0">
          <i class="fa fa-paint-brush text-primary text-2xl"></i>
          <span class="text-xl font-bold">墨籽拾光工作室</span>
        </div>
        
        <div class="text-gray-400 text-sm">
          &copy; 2023 墨籽拾光工作室 版权所有
        </div>
      </div>
    </div>
  </footer>

  <!-- 成功提交模态框 -->
  <div id="successModal" class="fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-xl max-w-md w-full transform transition-all">
      <div class="p-6 text-center">
        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fa fa-check text-2xl text-green-500"></i>
        </div>
        <h3 class="text-xl font-bold text-dark mb-2">投稿成功</h3>
        <p class="text-gray-600 mb-6">感谢您的投稿！我们将尽快审核您的作品。</p>
        <button id="closeSuccessModal" class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors">
          确定
        </button>
      </div>
    </div>
  </div>

  <script>
    // 初始化数据存储
    function initStorage() {
      // 检查是否已有管理员数据，如无则创建初始超级管理员
      if (!localStorage.getItem('admins')) {
        const superAdmin = {
          username: 'superadmin',
          password: CryptoJS.SHA256('admin123456').toString(), // 默认密码 admin123456
          name: '超级管理员',
          roles: ['总编', '副总编'],
          isSuper: true
        };
        
        localStorage.setItem('admins', JSON.stringify([superAdmin]));
      }
      
      // 检查是否已有投稿数据
      if (!localStorage.getItem('submissions')) {
        localStorage.setItem('submissions', JSON.stringify([]));
      }
    }
    
    // 匿名/实名切换逻辑
    const submissionTypeRadios = document.querySelectorAll('input[name="submissionType"]');
    const authorField = document.getElementById('authorField');
    const authorNameInput = document.getElementById('authorName');
    
    submissionTypeRadios.forEach(radio => {
      radio.addEventListener('change', function() {
        if (this.value === 'realname') {
          authorField.classList.remove('hidden');
          authorNameInput.required = true;
        } else {
          authorField.classList.add('hidden');
          authorNameInput.required = false;
        }
      });
    });
    
    // 文件上传逻辑
    const dropArea = document.getElementById('dropArea');
    const fileUpload = document.getElementById('fileUpload');
    const browseBtn = document.getElementById('browseBtn');
    const fileList = document.getElementById('fileList');
    let selectedFiles = [];
    
    // 浏览文件
    browseBtn.addEventListener('click', () => {
      fileUpload.click();
    });
    
    // 选择文件
    fileUpload.addEventListener('change', (e) => {
      handleFiles(e.target.files);
    });
    
    // 拖放功能
    dropArea.addEventListener('dragover', (e) => {
      e.preventDefault();
      dropArea.classList.add('border-primary', 'bg-primary/5');
    });
    
    dropArea.addEventListener('dragleave', () => {
      dropArea.classList.remove('border-primary', 'bg-primary/5');
    });
    
    dropArea.addEventListener('drop', (e) => {
      e.preventDefault();
      dropArea.classList.remove('border-primary', 'bg-primary/5');
      handleFiles(e.dataTransfer.files);
    });
    
    // 处理文件
    function handleFiles(files) {
      if (files.length === 0) return;
      
      selectedFiles = [...selectedFiles, ...Array.from(files)];
      renderFileList();
    }
    
    // 渲染文件列表
    function renderFileList() {
      if (selectedFiles.length === 0) {
        fileList.classList.add('hidden');
        return;
      }
      
      fileList.classList.remove('hidden');
      fileList.innerHTML = '';
      
      selectedFiles.forEach((file, index) => {
        // 检查文件大小
        if (file.size > 10 * 1024 * 1024) {
          const fileItem = document.createElement('div');
          fileItem.className = 'flex items-center justify-between p-3 bg-red-50 border border-red-100 rounded-lg';
          fileItem.innerHTML = `
            <div class="flex items-center">
              <i class="fa fa-file text-red-500 mr-3"></i>
              <div>
                <p class="text-sm font-medium text-red-700">${file.name}</p>
                <p class="text-xs text-red-500">文件过大（超过10MB）</p>
              </div>
            </div>
            <button type="button" class="text-red-500 hover:text-red-700 remove-file" data-index="${index}">
              <i class="fa fa-times"></i>
            </button>
          `;
          fileList.appendChild(fileItem);
        } else {
          const fileItem = document.createElement('div');
          fileItem.className = 'flex items-center justify-between p-3 bg-white border border-gray-100 rounded-lg';
          
          // 根据文件类型显示不同图标
          let fileIcon = 'fa-file-o';
          if (file.type.includes('pdf')) fileIcon = 'fa-file-pdf-o text-red-500';
          else if (file.type.includes('image')) fileIcon = 'fa-file-image-o text-green-500';
          
          fileItem.innerHTML = `
            <div class="flex items-center">
              <i class="fa ${fileIcon} mr-3"></i>
              <div>
                <p class="text-sm font-medium text-gray-800">${file.name}</p>
                <p class="text-xs text-gray-500">${formatFileSize(file.size)}</p>
              </div>
            </div>
            <button type="button" class="text-gray-400 hover:text-gray-600 remove-file" data-index="${index}">
              <i class="fa fa-times"></i>
            </button>
          `;
          fileList.appendChild(fileItem);
        }
      });
      
      // 添加删除文件事件
      document.querySelectorAll('.remove-file').forEach(button => {
        button.addEventListener('click', function() {
          const index = parseInt(this.getAttribute('data-index'));
          selectedFiles.splice(index, 1);
          renderFileList();
        });
      });
    }
    
    // 格式化文件大小
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }
    
    // 表单提交处理
    const submissionForm = document.getElementById('submissionForm');
    const successModal = document.getElementById('successModal');
    const closeSuccessModal = document.getElementById('closeSuccessModal');
    
    // 初始化存储
    initStorage();
    
    // 表单提交事件
    submissionForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      // 获取表单数据
      const formData = {
        id: generateUniqueId(), // 生成唯一ID
        type: document.querySelector('input[name="submissionType"]:checked').value,
        title: document.getElementById('workTitle').value,
        author: document.getElementById('authorName').value || '匿名',
        school: document.getElementById('school').value,
        grade: document.getElementById('grade').value,
        content: document.getElementById('workContent').value,
        files: selectedFiles.map(file => ({
          name: file.name,
          size: file.size,
          type: file.type,
          // 实际项目中可以在这里处理文件上传，这里仅存储基本信息
        })),
        status: 'pending', // 初始状态：待审核
        submittedAt: new Date().toISOString() // 提交时间
      };
      
      // 从localStorage获取现有投稿
      const submissions = JSON.parse(localStorage.getItem('submissions') || '[]');
      
      // 添加新投稿
      submissions.push(formData);
      
      // 保存回localStorage
      localStorage.setItem('submissions', JSON.stringify(submissions));
      
      // 显示成功模态框
      successModal.classList.remove('hidden');
      
      // 重置表单
      submissionForm.reset();
      selectedFiles = [];
      renderFileList();
      authorField.classList.add('hidden');
    });
    
    // 关闭成功模态框
    closeSuccessModal.addEventListener('click', function() {
      successModal.classList.add('hidden');
    });
    
    // 生成唯一ID
    function generateUniqueId() {
      return Date.now().toString(36) + Math.random().toString(36).substr(2, 5);
    }
    
    // 关于我们模态框控制
    const aboutUsBtn = document.getElementById('aboutUsBtn');
    const mobileAboutUsBtn = document.getElementById('mobileAboutUsBtn');
    const footerAboutUsBtn = document.getElementById('footerAboutUsBtn');
    const aboutUsModal = document.getElementById('aboutUsModal');
    const closeAboutModal = document.getElementById('closeAboutModal');
    
    function openAboutModal() {
      aboutUsModal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
    
    function closeAboutModalFunc() {
      aboutUsModal.classList.add('hidden');
      document.body.style.overflow = '';
    }
    
    aboutUsBtn.addEventListener('click', openAboutModal);
    mobileAboutUsBtn.addEventListener('click', openAboutModal);
    footerAboutUsBtn.addEventListener('click', openAboutModal);
    closeAboutModal.addEventListener('click', closeAboutModalFunc);
    
    // 点击模态框外部关闭
    aboutUsModal.addEventListener('click', function(e) {
      if (e.target === this) {
        closeAboutModalFunc();
      }
    });
    
    // 移动端菜单控制
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    
    menuBtn.addEventListener('click', function() {
      mobileMenu.classList.toggle('hidden');
    });
    
    // 导航栏滚动效果
    window.addEventListener('scroll', function() {
      const navbar = document.getElementById('navbar');
      if (window.scrollY > 50) {
        navbar.classList.add('shadow-md');
        navbar.classList.remove('shadow-sm');
      } else {
        navbar.classList.remove('shadow-md');
        navbar.classList.add('shadow-sm');
      }
    });
  </script>
</body>
</html>
// 在index.html的表单提交处理中
function submitSubmission() {
  // 获取表单数据
  const submission = {
    id: 'unique-id-' + Date.now(),
    title: document.getElementById('title').value,
    content: document.getElementById('content').value,
    author: document.getElementById('author').value,
    school: document.getElementById('school').value,
    grade: document.getElementById('grade').value,
    type: document.getElementById('anonymous').checked ? 'anonymous' : 'realname',
    submittedAt: new Date().toISOString(),
    status: 'pending',
    files: [] // 处理文件数据
  };
  
  // 从localStorage获取现有投稿
  const existingSubmissions = JSON.parse(localStorage.getItem('submissions') || '[]');
  // 添加新投稿
  existingSubmissions.push(submission);
  // 保存回localStorage
  localStorage.setItem('submissions', JSON.stringify(existingSubmissions));
  
  // 提交成功提示
  alert('投稿成功！');
}